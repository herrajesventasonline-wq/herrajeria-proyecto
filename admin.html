<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci칩n - Herrajer칤a</title>
     <!-- Configuraci칩n segura -->
    <script>
        // Variables de entorno que Netlify inyectar치
        window.SUPABASE_URL = '{{SUPABASE_URL}}';
        window.SUPABASE_ANON_KEY = '{{SUPABASE_ANON_KEY}}';
    </script>
    
    <!-- Solo en desarrollo: carga config.js -->
    <script>
        if (window.location.hostname === 'localhost' || 
            window.location.hostname === '127.0.0.1') {
            document.write('<script src="config.js"><\/script>');
        }
    </script>

    <meta name="description" content="Panel de administraci칩n para gesti칩n de productos de herrajer칤a">
    <meta name="author" content="Herrajer칤a">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- Hojas de estilo -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/admin.css">


    <!-- Favicon -->
    <link rel="icon"
        href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>游댢</text></svg>">
</head>

<body>
    <!-- Admin Header -->
    <header class="admin-header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-tools"></i>
                    <h1>Panel de Administraci칩n - Herrajer칤a</h1>
                </div>
                <div class="admin-actions">
                    <span id="admin-user" class="admin-user-info">
                        <i class="fas fa-user-circle"></i>
                        <span>Administrador</span>
                    </span>
                    <button class="btn btn-logout" id="logout-btn">
                        <i class="fas fa-sign-out-alt"></i> Cerrar Sesi칩n
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Admin Panel -->
    <section class="admin-panel">
        <div class="container">
            <!-- Tabs de Navegaci칩n -->
            <div class="admin-tabs">
                <button class="admin-tab active" data-tab="dashboard">
                    <i class="fas fa-tachometer-alt"></i> Resumen
                </button>
                <button class="admin-tab" data-tab="products">
                    <i class="fas fa-boxes"></i> Gesti칩n de Productos
                </button>

                <button class="admin-tab" data-tab="analytics">
                    <i class="fas fa-chart-line"></i> Ventas
                </button>
            </div>

            <!-- Secci칩n: Dashboard -->
     <!-- Secci칩n: Dashboard -->
<div class="admin-section active" id="dashboard-section">
    <!-- Estad칤sticas Principales -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-box"></i>
            </div>
            <div class="stat-value" id="total-products">0</div>
            <div class="stat-label">Productos Totales</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-box-open"></i>
            </div>
            <div class="stat-value" id="in-stock-products">0</div>
            <div class="stat-label">Productos con Stock</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-chart-line"></i>
            </div>
            <div class="stat-value" id="low-stock-products">0</div>
            <div class="stat-label">Stock Bajo</div>
        </div>
        <div class="stat-card">
            <div class="stat-icon">
                <i class="fas fa-shopping-cart"></i>
            </div>
            <div class="stat-value" id="total-orders">0</div>
            <div class="stat-label">Pedidos Totales</div>
        </div>
    </div>

    <!-- NUEVAS ESTAD칈STICAS AVANZADAS -->
    <div class="dashboard-grid-advanced" style="margin-top: 2rem;">
        <div class="advanced-stats-container">
            <!-- Productos M치s Vendidos -->
            <div class="stat-card-advanced">
                <div class="stat-card-header">
                    <i class="fas fa-fire" style="color: #ef4444;"></i>
                    <h4>Productos M치s Vendidos</h4>
                </div>
                <div class="stat-card-body">
                    <div class="top-products-list" id="top-sold-products">
                        <!-- Se cargar치 din치micamente -->
                        <div class="empty-state">
                            <i class="fas fa-chart-line"></i>
                            <p>No hay datos de ventas a칰n</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Productos M치s Clickeados -->
            <div class="stat-card-advanced">
                <div class="stat-card-header">
                    <i class="fas fa-mouse-pointer" style="color: #3b82f6;"></i>
                    <h4>Productos M치s Clickeados</h4>
                </div>
                <div class="stat-card-body">
                    <div class="top-products-list" id="top-clicked-products">
                        <!-- Se cargar치 din치micamente -->
                        <div class="empty-state">
                            <i class="fas fa-chart-bar"></i>
                            <p>No hay datos de clics a칰n</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Productos M치s Buscados -->
            <div class="stat-card-advanced">
                <div class="stat-card-header">
                    <i class="fas fa-search" style="color: #10b981;"></i>
                    <h4>Productos M치s Buscados</h4>
                </div>
                <div class="stat-card-body">
                    <div class="top-products-list" id="top-searched-products">
                        <!-- Se cargar치 din치micamente -->
                        <div class="empty-state">
                            <i class="fas fa-search"></i>
                            <p>No hay datos de b칰squedas a칰n</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Stock Bajo (lista expandida) -->
            <div class="stat-card-advanced">
                <div class="stat-card-header">
                    <i class="fas fa-exclamation-triangle" style="color: #f59e0b;"></i>
                    <h4>Stock Bajo (Detalle)</h4>
                    <span class="badge" id="low-stock-count">0</span>
                </div>
                <div class="stat-card-body">
                    <div class="low-stock-list" id="low-stock-details">
                        <!-- Se cargar치 din치micamente -->
                        <div class="empty-state">
                            <i class="fas fa-check-circle"></i>
                            <p>Todo el stock est치 en buen nivel</p>
                        </div>
                    </div>
                    <div class="stat-card-footer">
                        <a href="#products-section" class="btn-text" onclick="switchToProductsTab()">
                            Gestionar Stock <i class="fas fa-arrow-right"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

            <!-- Secci칩n: Gesti칩n de Productos -->
            <div class="admin-section" id="products-section">
                <div class="section-header">
                    <h3><i class="fas fa-boxes"></i> Gesti칩n de Productos</h3>
                    <div class="header-actions">
                        <button id="add-product-btn" class="btn btn-primary">
                            <i class="fas fa-plus"></i> Nuevo Producto
                        </button>
                        <button id="price-adjustment-btn-2" class="btn btn-warning">
                            <i class="fas fa-percentage"></i> Ajustar Precios
                        </button>
                    </div>
                </div>

                <!-- Sistema de b칰squeda -->
                <div class="search-container">
                    <div class="search-header">
                        <h4 class="search-title">
                            <i class="fas fa-search"></i> Buscar Productos
                        </h4>
                        <div class="search-controls">
                            <div class="search-box">
                                <i class="fas fa-search"></i>
                                <input type="text" id="product-search"
                                    placeholder="Buscar por nombre, SKU, marca, categor칤a..."
                                    aria-label="Buscar productos">

                            </div>
                        </div>

                    </div>
                </div>

                <!-- Lista de productos -->
                <div class="products-list" id="admin-products-list">
                    <!-- Los productos se cargar치n aqu칤 din치micamente -->
                </div>
            </div>


            <!-- Secci칩n: Ventas -->
            <div class="admin-section" id="analytics-section">
                <div class="section-header">
                    <h3><i class="fas fa-chart-line"></i> Ventas y Pedidos</h3>
                    <div class="header-actions">
                        <button class="btn btn-primary" onclick="loadAdminData()">
                            <i class="fas fa-sync-alt"></i> Actualizar
                        </button>
                    </div>
                </div>

                <!-- Estad칤sticas de ventas -->
                <div class="orders-stats">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-receipt"></i>
                            </div>
                            <div class="stat-value" id="total-orders-display">0</div>
                            <div class="stat-label">Total Pedidos</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-money-bill-wave"></i>
                            </div>
                            <div class="stat-value" id="total-revenue">$0</div>
                            <div class="stat-label">Ingresos Totales</div>
                        </div>
                    </div>
                </div>

                <!-- Filtro de fechas -->
                <div class="date-filter">
                    <div class="date-filter-content">
                        <div class="filter-select">
                            <label for="date-filter">
                                <i class="fas fa-calendar-alt"></i> Filtrar por:
                            </label>
                            <select id="date-filter">
                                <option value="all">Todo el historial</option>
                                <option value="today">Hoy</option>
                                <option value="yesterday">Ayer</option>
                                <option value="week">Esta semana</option>
                                <option value="month">Este mes</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Lista de pedidos -->
                <h3>Pedidos Realizados</h3>
                <div class="orders-list" id="orders-list">
                    <!-- Los pedidos se cargar치n aqu칤 din치micamente -->
                </div>
            </div>
        </div>
    </section>

    <!-- Modal para Productos -->
    <div class="modal" id="product-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="product-modal-title">
                    <i class="fas fa-box"></i> <span>Nuevo Producto</span>
                </h3>
                <button class="close-modal" aria-label="Cerrar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="product-form">
                    <input type="hidden" id="product-id">

                    <div class="form-group">
                        <label for="product-name">
                            <i class="fas fa-tag"></i> Nombre del Producto *
                        </label>
                        <input type="text" id="product-name" required placeholder="Ingrese el nombre del producto">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-category">
                                <i class="fas fa-folder"></i> Categor칤a *
                            </label>
                            <select id="product-category" required>
                                <option value="">Seleccionar categor칤a</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="product-brand">
                                <i class="fas fa-trademark"></i> Marca *
                            </label>
                            <select id="product-brand" required>
                                <option value="">Seleccionar marca</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="product-sku">
                            <i class="fas fa-barcode"></i> SKU
                        </label>
                        <input type="text" id="product-sku" placeholder="Se generar치 autom치ticamente si se deja vac칤o">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-cost-price">
                                <i class="fas fa-dollar-sign"></i> Precio de Costo ($)
                            </label>
                            <input type="number" id="product-cost-price" step="0.01" min="0" value="0">
                        </div>

                        <div class="form-group">
                            <label for="product-wholesale-price">
                                <i class="fas fa-industry"></i> Precio Mayorista ($) *
                            </label>
                            <input type="number" id="product-wholesale-price" step="0.01" min="0" required>
                        </div>

                        <div class="form-group">
                            <label for="product-retail-price">
                                <i class="fas fa-store"></i> Precio Minorista ($) *
                            </label>
                            <input type="number" id="product-retail-price" step="0.01" min="0" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="product-stock">
                                <i class="fas fa-boxes"></i> Stock
                            </label>
                            <input type="number" id="product-stock" min="0" value="0">
                        </div>

                        <div class="form-group">
                            <label for="product-min-stock">
                                <i class="fas fa-exclamation-triangle"></i> Stock M칤nimo
                            </label>
                            <input type="number" id="product-min-stock" min="0" value="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="product-colors">
                            <i class="fas fa-palette"></i> Colores (separados por coma)
                        </label>
                        <input type="text" id="product-colors" placeholder="Ej: Negro, Blanco, Plateado">
                    </div>

                    <div class="form-group">
                        <label for="product-description">
                            <i class="fas fa-align-left"></i> Descripci칩n *
                        </label>
                        <textarea id="product-description" rows="4" required
                            placeholder="Describa el producto detalladamente"></textarea>
                    </div>

                    <div class="form-group">
                        <label for="product-specifications">
                            <i class="fas fa-list-alt"></i> Especificaciones T칠cnicas
                        </label>
                        <textarea id="product-specifications" rows="3"
                            placeholder="Ej:&#10;Material: Acero inoxidable&#10;Medidas: 10x15cm&#10;Peso: 500g"></textarea>
                    </div>



                    <div class="form-group">
                        <label>
                            <i class="fas fa-images"></i> Im치genes del Producto
                        </label>
                        <div class="images-upload-container">
                            <div class="upload-area" id="upload-area">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Arrastra im치genes aqu칤 o haz clic para seleccionar</p>
                                <small class="upload-hint">M치ximo 5MB por imagen. Formatos: JPG, PNG, WEBP, GIF</small>
                                <input type="file" id="image-upload" multiple accept="image/*" style="display: none;">
                            </div>
                            <div class="images-preview" id="images-preview">
                                <!-- Las im치genes previsualizadas aparecer치n aqu칤 -->
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" id="cancel-product">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-primary" id="save-product">
                            <i class="fas fa-save"></i> Guardar Producto
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Modal para Ajuste de Precios -->
    <div class="modal" id="price-adjustment-modal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h3><i class="fas fa-percentage"></i> Ajuste Masivo de Precios</h3>
                <button class="close-modal" aria-label="Cerrar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <form id="price-adjustment-form">
                    <div class="form-group">
                        <label for="adjustment-type">
                            <i class="fas fa-cog"></i> Tipo de Ajuste *
                        </label>
                        <select id="adjustment-type" required>
                            <option value="">Seleccionar tipo</option>
                            <option value="percentage">Porcentaje (%)</option>
                            <option value="fixed">Monto Fijo ($)</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="adjustment-value">
                            <i class="fas fa-calculator"></i> Valor del Ajuste *
                        </label>
                        <input type="number" id="adjustment-value" step="0.01" required
                            placeholder="Ej: 10 para 10% o $10">
                        <small class="form-hint" id="adjustment-hint">
                            Ingrese el porcentaje o monto del ajuste
                        </small>
                    </div>

                    <div class="form-group">
                        <label for="adjustment-operation">
                            <i class="fas fa-arrows-alt-v"></i> Operaci칩n *
                        </label>
                        <select id="adjustment-operation" required>
                            <option value="increase">Aumentar</option>
                            <option value="decrease">Disminuir</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="apply-to">
                            <i class="fas fa-crosshairs"></i> Aplicar a *
                        </label>
                        <select id="apply-to" required>
                            <option value="all">Todos los productos</option>
                            <option value="category">Por categor칤a</option>
                            <option value="brand">Por marca</option>
                            <option value="selected">Productos seleccionados</option>
                        </select>
                    </div>

                    <div class="form-group conditional-field" id="category-field" style="display: none;">
                        <label for="adjustment-category">
                            <i class="fas fa-folder"></i> Categor칤a *
                        </label>
                        <select id="adjustment-category">
                            <option value="">Seleccionar categor칤a</option>
                        </select>
                    </div>

                    <div class="form-group conditional-field" id="brand-field" style="display: none;">
                        <label for="adjustment-brand">
                            <i class="fas fa-trademark"></i> Marca *
                        </label>
                        <select id="adjustment-brand">
                            <option value="">Seleccionar marca</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>
                            <i class="fas fa-money-bill-wave"></i> Ajustar *
                        </label>
                        <div class="checkbox-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="adjust-wholesale" value="wholesale" checked>
                                <span class="checkmark"></span>
                                Precio Mayorista
                            </label>
                            <label class="checkbox-label">
                                <input type="checkbox" id="adjust-retail" value="retail" checked>
                                <span class="checkmark"></span>
                                Precio Minorista
                            </label>
                        </div>
                    </div>

                    <div class="preview-section" id="preview-section" style="display: none;">
                        <h4><i class="fas fa-eye"></i> Vista Previa del Ajuste</h4>
                        <div class="preview-info">
                            <div id="preview-details"></div>
                            <div class="preview-stats">
                                <strong>Productos afectados: <span id="affected-products">0</span></strong>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-cancel" id="cancel-adjustment">
                            <i class="fas fa-times"></i> Cancelar
                        </button>
                        <button type="submit" class="btn btn-warning" id="apply-adjustment">
                            <i class="fas fa-percentage"></i> Aplicar Ajuste
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>



    <!-- Modal de Confirmaci칩n -->
    <div class="modal" id="confirmation-modal">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h3><i class="fas fa-exclamation-triangle"></i> <span id="confirmation-title">Confirmar acci칩n</span>
                </h3>
                <button class="close-modal" aria-label="Cerrar">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirmation-icon">
                    <i class="fas fa-question-circle"></i>
                </div>
                <p id="confirmation-message">쮼st치s seguro de que quieres realizar esta acci칩n?</p>
                <div class="confirmation-details" id="confirmation-details">
                    <!-- Detalles adicionales ir치n aqu칤 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-cancel" id="confirmation-cancel">
                    <i class="fas fa-times"></i> Cancelar
                </button>
                <button class="btn btn-danger" id="confirmation-confirm">
                    <i class="fas fa-check"></i> Confirmar
                </button>
            </div>
        </div>
    </div>

    <!-- EN admin.html - MEJORAR el modal de factura (#invoice-modal) -->
    <!-- Reemplaza el contenido del modal de factura con esta versi칩n mejorada -->
    <div class="modal" id="invoice-modal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header" style="background: #f8fafc; border-bottom: 2px solid #3b82f6; padding: 20px;">
                <div class="header-logo" style="display: flex; align-items: center; gap: 15px; flex: 1;">
                    <i class="fas fa-tools" style="font-size: 36px; color: #3b82f6;"></i>
                    <div>
                        <h3 style="margin: 0; color: #1e40af;">Herrajer칤a Industrial</h3>
                        <small style="color: #64748b;">Factura Electr칩nica - Panel de Administraci칩n</small>
                    </div>
                </div>
                <div class="invoice-header-info" style="text-align: right;">
                    <div class="invoice-number-display" style="margin-bottom: 10px;">
                        <div style="font-size: 12px; color: #64748b; text-transform: uppercase;">FACTURA</div>
                        <div id="invoice-number" style="font-size: 24px; font-weight: 700; color: #1e293b;">#000001
                        </div>
                    </div>
                    <div id="invoice-status" class="status-badge pending" style="display: inline-block; padding: 6px 12px; border-radius: 20px; 
                            background: #fef3c7; color: #92400e; font-size: 12px; font-weight: 600;">
                        Pendiente
                    </div>
                    <button class="close-modal" aria-label="Cerrar" style="position: absolute; top: 20px; right: 20px;">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <div class="modal-body" style="padding: 0;">
                <!-- Informaci칩n de la Empresa y Cliente -->
                <div
                    style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; padding: 25px; border-bottom: 1px solid #e2e8f0;">
                    <div>
                        <h4 style="color: #3b82f6; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-building"></i> Emisor
                        </h4>
                        <div class="company-info" style="line-height: 1.6; color: #475569;">
                            <strong style="display: block; margin-bottom: 5px;">Herrajer칤a Industrial</strong>
                            <div>Av. Industrial 2450, Parque Industrial</div>
                            <div><i class="fas fa-phone"></i> +54 358 1234-5678</div>
                            <div><i class="fas fa-envelope"></i> ventas@herrajeria.com</div>
                            <div><i class="fas fa-id-card"></i> CUIT: 30-12345678-9</div>
                            <div><i class="fas fa-file-invoice-dollar"></i> IVA: Responsable Inscripto</div>
                        </div>
                    </div>
                    <div>
                        <h4 style="color: #3b82f6; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-user"></i> Cliente
                        </h4>
                        <div class="customer-info" style="line-height: 1.6; color: #475569;">
                            <strong style="display: block; margin-bottom: 5px;" id="customer-name">Juan P칠rez</strong>
                            <div><i class="fas fa-phone"></i> Tel: <span id="customer-phone">+54 11 1234-5678</span>
                            </div>
                            <div><i class="fas fa-envelope"></i> Email: <span
                                    id="customer-email">cliente@ejemplo.com</span></div>
                            <div><i class="fas fa-credit-card"></i> M칠todo: <span id="payment-method">Acordar por
                                    WhatsApp</span></div>
                        </div>
                    </div>
                </div>

                <!-- Informaci칩n del Pedido -->
                <div style="padding: 20px 25px; border-bottom: 1px solid #e2e8f0;">
                    <h4 style="color: #3b82f6; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-info-circle"></i> Informaci칩n del Pedido
                    </h4>
                    <div class="info-grid"
                        style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                        <div class="info-item">
                            <strong style="color: #64748b;">N칰mero:</strong>
                            <span id="invoice-id" style="font-weight: 600; color: #1e293b;">ORD-001</span>
                        </div>
                        <div class="info-item">
                            <strong style="color: #64748b;">Fecha:</strong>
                            <span id="invoice-date">22 de diciembre de 2025</span>
                        </div>
                        <div class="info-item">
                            <strong style="color: #64748b;">Hora:</strong>
                            <span id="invoice-time">15:30</span>
                        </div>
                        <div class="info-item">
                            <strong style="color: #64748b;">Condici칩n:</strong>
                            <span>Contado</span>
                        </div>
                    </div>
                </div>

                <!-- Detalles del Pedido -->
                <div style="padding: 20px 25px;">
                    <h4 style="color: #3b82f6; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-list"></i> Detalles del Pedido
                    </h4>
                    <div class="table-responsive">
                        <table class="invoice-table" style="width: 100%; border-collapse: collapse;">
                            <thead>
                                <tr style="background: #f8fafc;">
                                    <th
                                        style="padding: 12px 15px; text-align: left; border: 1px solid #e2e8f0; font-weight: 600;">
                                        Producto</th>
                                    <th
                                        style="padding: 12px 15px; text-align: center; border: 1px solid #e2e8f0; font-weight: 600;">
                                        Cantidad</th>
                                    <th
                                        style="padding: 12px 15px; text-align: right; border: 1px solid #e2e8f0; font-weight: 600;">
                                        Precio Unit.</th>
                                    <th
                                        style="padding: 12px 15px; text-align: right; border: 1px solid #e2e8f0; font-weight: 600;">
                                        Total</th>
                                </tr>
                            </thead>
                            <tbody id="invoice-items">
                                <!-- Los productos se cargar치n aqu칤 -->
                            </tbody>
                            <tfoot>
                                <tr>
                                    <td colspan="3"
                                        style="padding: 12px 15px; text-align: right; border-top: 2px solid #e2e8f0;">
                                        <strong>Subtotal:</strong>
                                    </td>
                                    <td
                                        style="padding: 12px 15px; text-align: right; border-top: 2px solid #e2e8f0; font-weight: 600;">
                                        $<span id="invoice-subtotal">0.00</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" style="padding: 12px 15px; text-align: right;">
                                        <strong>IVA (21%):</strong>
                                    </td>
                                    <td style="padding: 12px 15px; text-align: right; font-weight: 600;">
                                        $<span id="invoice-tax">0.00</span>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="3" style="padding: 12px 15px; text-align: right;">
                                        <strong>Env칤o:</strong>
                                    </td>
                                    <td style="padding: 12px 15px; text-align: right; font-weight: 600;">
                                        $<span id="invoice-shipping">0.00</span>
                                    </td>
                                </tr>
                                <tr style="background: #f1f5f9;">
                                    <td colspan="3" style="padding: 12px 15px; text-align: right;">
                                        <h4 style="margin: 0; color: #1e293b;">TOTAL:</h4>
                                    </td>
                                    <td style="padding: 12px 15px; text-align: right;">
                                        <h4 style="margin: 0; color: #059669;">$<span id="invoice-total">0.00</span>
                                        </h4>
                                    </td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                </div>

                <!-- Observaciones -->
                <div style="padding: 20px 25px; background: #f8fafc; border-top: 1px solid #e2e8f0;">
                    <h4 style="color: #3b82f6; margin-bottom: 10px; display: flex; align-items: center; gap: 10px;">
                        <i class="fas fa-sticky-note"></i> Observaciones
                    </h4>
                    <p style="color: #475569; line-height: 1.6; font-size: 13px;">
                        Factura generada electr칩nicamente. Esta factura es v치lida sin firma ni sello conforme
                        art. 7춿 de la Resoluci칩n General N춿 4.503/2017 de la AFIP.
                    </p>
                
                </div>
            </div>

            <div class="modal-footer" style="padding: 20px; border-top: 1px solid #e2e8f0; background: #f8fafc;">
                <button class="btn btn-secondary" onclick="hideInvoiceModal()" style="padding: 10px 20px;">
                    <i class="fas fa-times"></i> Cerrar
                </button>
              
                <button class="btn btn-primary" id="print-invoice" style="padding: 10px 20px;">
                    <i class="fas fa-print"></i> Imprimir
                </button>
            </div>
        </div>
    </div>


    <!-- Overlay para modales -->
    <div class="overlay" id="overlay"></div>


    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="js/supabase-client.js"></script> <!-- Este es el de admin -->
    <script src="js/admin-init.js"></script>
    <!-- NO cargar app.js aqu칤 -->

    <script src="js/price-adjustment-fixed.js"></script>

</body>

</html>